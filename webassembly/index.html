<!doctype html>
<html lang="en">

    <head>
        <meta charset="utf-8">

        <title>WebAssembly</title>
        <link rel="stylesheet" href="./css/font-awesome.css">
        <link rel="stylesheet" href="./css/reveal.min.css">
        <link rel="stylesheet" href="./lib/css/zenburn.css">
        <link rel="stylesheet" href="./css/bekk2.css">
        <link rel="stylesheet" href="./css/style.css">
        <style>
          * {
            font-size: 2em;
            font-family: Roboto, sans-serif;
          }

          .reveal .box {
            border-color: black;
          }
        </style>
    </head>

    <body>

        <div class="reveal">

            <div class="slides">

                <section data-background="white">
                  <img src="images/webassembly_logo.svg" class="no-border no-background" />

                  <aside class="notes">
                    <ul>
                      <li>Mitt navn, Trondheim</li>
                      <li>Hørt om WASM?</li>
                      <li>Prøvd?</li>
                      <li></li>
                    </ul>
                  </aside>
                </section>

                <section>
                  <p class="quote">
                    <p style="padding-bottom: 0.8em;"><b style="font-size: 2em;">WebAssembly</b> eller <i style="font-size: 1.2em;">wasm</i> </p>
                    <p> er et <span class="fragment">relativt nytt</span></p>
                    <p  class="fragment" style="font-size: 1.5em; padding-bottom: 0.5em;"><i>portabelt</i>,</p>
                    <p  class="fragment" style="font-size: 1.5em; padding-bottom: 0.5em;"><i>sikkert</i>,</p>
                    <p  class="fragment" style="padding-bottom: 0.8em;"><strong>størrelse-</strong> og <strong>last-tid-effektivt <i style="font-size: 1.1em;">format</i></strong></p>
                    <p class="fragment" style="font-size: 1.2em;">passende for kompileringer til <span style="font-size: 1.1em">web</span>.</p>
                  </p>
                  <aside class="notes">
                    <ul>
                      <li>Relativt nytt - annonsert 2015</li>
                      <li>protable -> Trenger nettleser</li>
                      <li>sanboxet som sikrer minne fra andre applikasjoner</li>
                      <li>WASM binary encoded</li>
                      <li></li>
                    </ul>
                  </aside>
                </section>

                <!-- ASM -->
                <section>
                  <section>
                    <p style="float: left; font-size: 3em">"Assembly?</p>
                    <p style="float: left; font-size: 3em">Skal vi tilbake til urtiden, eller?"</p>
                    <aside class="notes">
                      <ul>
                        <li>Mja, asm.js brukes som intermediate</li>
                        <li>asm.js er et subsett av javascript, som man lettere kan representere som assembly instrukser</li>
                        <li>Tenk .NET CLR eller Javas bytecode</li>
                      </ul>
                    </aside>
                  </section>

              <section>

<div class="flex">
<pre class="bigcode">
<code class="hljs c">
int f(int i) {
  return i + 1;
}
</code>
C
</pre>
<div class="arrow-box">
  <div class="emscripten">Emscripten</div>
  <i class="fa fa-long-arrow-right arrow" aria-hidden="true"></i>
</div>
<pre class="bigcode">
<code class="hljs javascript">
function f(i) {
  i = i|0;
  return (i + 1)|0;
}
</code>
asm.js
</pre>
</div>
        <aside class="notes">
          <ul>
            <li>+ raskere kode, subset</li>
            <li>andre språk på web</li>
            <li>mer manuell minnehåndtering</li>
            <li>raskere enn JS pga ingen typesjekk eller garbage collection</li>
            <li>men fortsatt tekst, ikke binær</li>
            <li>mer verbost</li>
            <li>treg nedlasting og parsing</li>
          </ul>
        </aside>
                  </section>

                  <section>
                    <div class="flex">
                      <div class="box">C / C++ kildekode</div>
                      <div class="arrow-box">
                        <div class="emscripten">Emscripten</div>
                        <i class="fa fa-long-arrow-right arrow" aria-hidden="true"></i>
                      </div>
                      <div class="">
                        <div class="box">
                          wasm modul
                        </div>
                        <div class="plus">
                          +
                        </div>
                        <div class="box">
                          <span>HTML dokument</span>
                          <div class="box">
                            JS "lim" kode
                          </div>
                        </div>
                      </div>

                    </div>

                    <aside class="notes">
                      <ul>
                        <li>Emscripten bruker clang / LLVM, til AST</li>
                        <li>lim er js kode fra emscripten for å aksesere dom og JS apier</li>
                      </ul>
                    </aside>
                  </section>


                  <section>

<div class="flex">
<pre class="bigcode semibig">
<code class="hljs c">
int factorial(int n) {
  if (n == 0)
    return 1;
  else
    return n * factorial(n-1);
}
</code>
C
</pre>
<div class="arrow-box">
  <div class="emscripten">Emscripten</div>
  <i class="fa fa-long-arrow-right arrow" aria-hidden="true"></i>
</div>
<pre class="bigcode semibig">
<code class="hljs xml">
20 00 | get_local 0
50    | i64.eqz
04 7e | if i64
42 01 |    i64.const 1
05    | else
20 00 |    get_local 0
20 00 |    get_local 0
42 01 |    i64.const 1
7d    |    i64.sub
10 00 |    call 0
7e    |    i64.mul
0b    | end
</code>
  WASM  | Intermedia representation
</pre>
</div>
<p class="kilde">Kilde wikipedia</p>
                    <aside class="notes">
                      <ul>
                        <li>WASM - stackmaskin</li>
                        <li>asm.js er et subsett av javascript, som man lettere kan representere som assembly instrukser</li>
                        <li>Tenk .NET CLR eller Javas bytecode</li>
                      </ul>
                    </aside>
                  </section>

                </section>

                <!--
                Hva er web assembly?
                Hvordan vil det fungere?
                Hvordan bruke det i dag?
                Hva er det ikke?
                Framtiden
                DEMO
                //-->

                
                <section>
                  <section>
                    <h2>"Så hvorfor?"</h2>
                  </section>

                  <section>
                    <img src="images/05-01-diagram_now01-768x198.png" class="no-border no-background" />
                    <p>Javascript i dag</p>

                    <aside class="notes">
                      <ul>
                        <li>Javascript har bare en kjerne</li>
                        <li>Tekst må parses</li>
                        <li>Lastes ned</li>
                      </ul>
                    </aside>
                  </section>

                  <section>
                    <img src="images/05-03-diagram_future01.png" class="no-border no-background" />
                    <p>WASM</p>

                    <aside class="notes">
                      <ul>
                        <li>Webassembly ekte multitråd</li>
                        <li>Ingen parsing parses</li>
                        <li>Lastes ned mindre</li>
                        <li>Portere eksisterende kode</li>
                      </ul>
                    </aside>
                  </section>

                  <section>
                    <h2>Ditt språk, overalt</h2>
                    <aside class="notes">
                      <ul>
                        <li>Web and non-web platforms</li>
                        <li>Legg til ditt språk i LLVM (Low Level Virtual Machine) / Clang</li>
                        <li>Samling med modulære og gjenbrukbare kompilatorer og toolchains</li>
                      </ul>
                    </aside>
                  </section>

                  <section>
                    <h2>Ingen plugins, installasjon, appstores</h2>
                    <aside class="notes">
                      <ul>
                        <li>Alt du trenger ligger i nettlesren</li>
                        <li>Bibloteker</li>
                      </ul>
                    </aside>
                  </section>

                  <section>
                    <h2>Web APIer</h2>
                    <aside class="notes">
                      <ul>
                        <li>(DOM, CSSOM, WebGL, IndexedDB, Web Audio API, etc.</li>
                        <li></li>
                      </ul>
                    </aside>
                  </section>

                  <section>
                    <h2>Full kontroll</h2>
                    <aside class="notes">
                      <ul>
                        <li>Shared Memory Array buffers</li>
                        <li>Kontroll over garbage collection</li>
                        <li>Parallellisering</li>
                        <li>SIMD (Single instruction, multiple data)</li>
                      </ul>
                    </aside>
                  </section>

                  <section>
                    <h2>Ytelse</h2>
                    <aside class="notes">
                      <ul>
                        <li>Spesielt på mobil, opp til 90% fortere i Firefox på mobil</li>
                        <li>Ikke raskere enn nativ app, men ikke lang ifra!</li>
                        <li>Multi-tråd programmering med meldingshåndtering</li>
                      </ul>
                    </aside>
                  </section>

                  <section>
                    <h2>Blazor bruker web assembly</h2>
                    <aside class="notes">
                      <ul>
                        <li>c# -> </li>
                        <li>Alle devicer, også mobil</li>
                        <li>Alle devicer</li>
                      </ul>
                    </aside>
                  </section>

                  <section>
                    <h2>Rust / C / C++ / hva enn du vil</h2>
                    <aside class="notes">
                      <ul>
                        Kommer demo
                      </ul>
                    </aside>
                  </section>

                  <section>
                    <ul>
                      <li>
                      </ul>
                        <a target="_blank" href="https://wasm.continuation-labs.com/d3demo/">Doom 3 i nettleser</a>
                      </li>
                      <li>
                        Unity kan eksportere til WASM
                      </li>
                    <aside class="notes">
                      <ul>
                        <li>Porting</li>
                        <li>Alle devicer, også mobil</li>
                        <li>Alle devicer</li>
                      </ul>
                    </aside>
                  </section>

                  <section>
                    <h2>Video og audio redigering rett i browser</h2>
                    <a target="_blank" href="https://d2jta7o2zej4pf.cloudfront.net/">https://d2jta7o2zej4pf.cloudfront.net/</a>
                    <aside class="notes">
                      <ul>
                        <li>Ghost</li>
                        <li>JS raskere siden kommunikasjon er treg</li>
                        <li>mye overhead med mange små kall</li>
                      </ul>
                    </aside>
                  </section>

                  <section>
                    <!-- can i use -->
                    <img src="images/caniuse.png" class="no-border no-background" />
                    <p class="kilde">Kilde: caniuse.com</p>
                  </section>

                <!-- end pros -->
                </section>

                <section>
                  <section>
                    <h2>Hva mangler?</h2>
                  </section>

                  <section>
                    <h2>Tilgang på DOM</h2>
                    <aside class="notes">
                      <ul>
                        <li>Bare main Javascript thread har tilgang</li>
                        <li>Ikke helt det man ønsker?</li>
                      </ul>
                    </aside>
                  </section>

                  <section>
                    <h2>Debugging ikke helt perfekt</h2>
                    <aside class="notes">
                      <ul>
                        <li>Debugging in Chrome DevTools</li>
                        <li>Kan debugge koden direkte som wassembly</li>
                        <li>Trenger source maps for å se "skikkelig" kode</li>
                        <li>Rust og Clang kompilatoren kan lage for deg</li>
                      </ul>
                    </aside>
                  </section>

                  <section>
                    <h2>Alt er med... ALT</h2>
                    <aside class="notes">
                      <ul>
                        <li>Hele C runtime, string bibloteker, alle biblotekene</li>
                        <li>Likevel, ikke større enn react.js</li>
                      </ul>
                    </aside>
                  </section>

                  <section>
                    <h2>Eldre kode må fortsatt portes</h2>
                    <aside class="notes">
                      <ul>
                        <li>Ingen automatikk</li>
                        <li>Wolfenstein 3D... 10 timer</li>
                      </ul>
                    </aside>
                  </section>

                  <section>
                    <h2>Dårlig errorhandling</h2>
                    <aside class="notes">
                      <ul>
                        <li>Alt må trappes i javascript</li>
                        <li>Lite feilmeldinger</li>
                        <li>try catch kan endre opp i javascript</li>
                      </ul>
                    </aside>
                  </section>

                  <section>
                    <h2>Snakker i hovedsak strenger</h2>
                    <aside class="notes">
                      <ul>
                        <li>Kommuikasjon mellom JS og wasm strenger</li>
                        <li>serialisere og deserialisere ved kommunikasjon</li>
                        <li>Minst mulig kommunikasjon</li>
                      </ul>
                    </aside>
                  </section>


                  <section>
                    <h2>APIer fortsatt i Draft hos W3C</h2>
                    <aside class="notes">
                      <ul>
                        <li>Skal kunne direkte</li>
                        <li>Kan i dag kalles via JS</li>
                        <li>Litt som C direkte i python</li>
                      </ul>
                    </aside>
                  </section>

                </section>

                <section>
                  <h2>Takk for meg!</h2>

                  <p>Mer info</p>
                  <ul>
                    <li>http://webassembly.org/</li>
                    <li>https://madewithwebassembly.com/</li>
                  </ul>
                </section>
            </div>

        </div>

        <script src="./lib/js/head.min.js"></script>
        <script src="./js/reveal.min.js"></script>
        <script type="text/javascript" src="./vendor/prefixfree.min.js"></script>

        <script>

            Reveal.initialize({
                controls: true,
                progress: true,
                history: true,
                center: true,
                transition: 'Concave', //Default - None - Fade - Slide - Concave - Zoom
                dependencies: [
                    { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; }},
                    { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					          { src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
                ]
            });

        </script>
    </body>
</html>
